Building for debugging...
[0/3] Write sources
[1/3] Write swift-version--58304C5D6DBC2206.txt
[3/5] Compiling MosaicKit MetalImageProcessor.swift
<unknown>:0: warning: upcoming feature 'BareSlashRegexLiterals' is already enabled as of Swift version 6
/Users/francois/gravity/MosaicKit/Sources/Processing/MetalImageProcessor.swift:71:33: warning: no calls to throwing functions occur within 'try' expression
  69 |             
  70 |             // Try to load default library first
  71 |             if let defaultLib = try? device.makeDefaultLibrary() {
     |                                 `- warning: no calls to throwing functions occur within 'try' expression
  72 |                 self.library = defaultLib
  73 |             } else {

/Users/francois/gravity/MosaicKit/Sources/Processing/MetalImageProcessor.swift:748:33: warning: no calls to throwing functions occur within 'try' expression
 746 |             mosaicTexture = texture
 747 |         } else {
 748 |             guard let texture = try processImagesToMTLTexture(images: frames.map { $0.image }, maxColors: 5, outputSize: mosaicSize) else {
     |                                 `- warning: no calls to throwing functions occur within 'try' expression
 749 |                 throw MetalProcessorError.textureCreationFailed
 750 |             }

/Users/francois/gravity/MosaicKit/Sources/Processing/MetalImageProcessor.swift:657:13: warning: will never be executed
 655 |                 return nil
 656 |             }
 657 |             return nil
     |             `- warning: will never be executed
 658 |         }
 659 |         return nil

/Users/francois/gravity/MosaicKit/Sources/Processing/MetalImageProcessor.swift:659:9: warning: will never be executed
 657 |             return nil
 658 |         }
 659 |         return nil
     |         `- warning: will never be executed
 660 |     }
 661 |     
[4/5] Emitting module MosaicKit
<unknown>:0: warning: upcoming feature 'BareSlashRegexLiterals' is already enabled as of Swift version 6
[4/6] Write Objects.LinkFileList
[5/6] Linking MosaicKitPackageTests
Build complete! (4.34s)
Test Suite 'Selected tests' started at 2025-11-29 22:24:36.035.
Test Suite 'MosaicKitPackageTests.xctest' started at 2025-11-29 22:24:36.037.
Test Suite 'GeneratorComparisonTests' started at 2025-11-29 22:24:36.037.
Test Case '-[MosaicKitTests.GeneratorComparisonTests testLargeMosaicComparison]' started.
2025-11-29T22:24:36+0100 info com.mosaickit: [MosaicKit] Generating mosaic from test_video.mp4
2025-11-29T22:24:36+0100 info com.mosaickit: [MosaicKit] Generating mosaic with Metal acceleration (preferred)...
2025-11-29T22:24:42+0100 info com.mosaickit: [MosaicKit] Mosaic generated successfully at test_video_10000_XS_16-9.heic
2025-11-29T22:24:42+0100 info com.mosaickit: [MosaicKit] Generating mosaic from test_video.mp4
2025-11-29T22:24:42+0100 info com.mosaickit: [MosaicKit] Generating mosaic with Core Graphics acceleration (preferred)...
2025-11-29T22:25:07+0100 info com.mosaickit: [MosaicKit] Mosaic generated successfully at test_video_10000_XS_16-9.heic
Test Case '-[MosaicKitTests.GeneratorComparisonTests testLargeMosaicComparison]' passed (31.568 seconds).
Test Suite 'GeneratorComparisonTests' passed at 2025-11-29 22:25:07.605.
	 Executed 1 test, with 0 failures (0 unexpected) in 31.568 (31.568) seconds
Test Suite 'MosaicKitPackageTests.xctest' passed at 2025-11-29 22:25:07.605.
	 Executed 1 test, with 0 failures (0 unexpected) in 31.568 (31.568) seconds
Test Suite 'Selected tests' passed at 2025-11-29 22:25:07.605.
	 Executed 1 test, with 0 failures (0 unexpected) in 31.568 (31.570) seconds

ğŸ“ Output directories:
  Metal:         /var/folders/6d/dv5dx7bn6gg9f48k5f0y2t2h0000gn/T/MosaicKitTests/Metal
  Core Graphics: /var/folders/6d/dv5dx7bn6gg9f48k5f0y2t2h0000gn/T/MosaicKitTests/CoreGraphics

================================================================================
ğŸ”¬ Large Mosaic Performance Comparison Test
Video: /Users/francois/gravity/MosaicKit/test_video.mp4
================================================================================

ğŸ“Š Testing Metal Implementation...
layout process in 0.000988006591796875 seconds

ğŸ“Š Testing Core Graphics Implementation...
prpgress of timestamp  : 0.6016064257028112
prpgress of timestamp  : 0.6032128514056224
prpgress of timestamp  : 0.6048192771084338
prpgress of timestamp  : 0.606425702811245
prpgress of timestamp  : 0.6080321285140562
prpgress of timestamp  : 0.6096385542168674
prpgress of timestamp  : 0.6112449799196787
prpgress of timestamp  : 0.61285140562249
prpgress of timestamp  : 0.6144578313253012
prpgress of timestamp  : 0.6160642570281124
prpgress of timestamp  : 0.6176706827309236
prpgress of timestamp  : 0.619277108433735
prpgress of timestamp  : 0.6208835341365462
prpgress of timestamp  : 0.6224899598393574
prpgress of timestamp  : 0.6240963855421686
prpgress of timestamp  : 0.6257028112449798
prpgress of timestamp  : 0.6273092369477912
prpgress of timestamp  : 0.6289156626506024
prpgress of timestamp  : 0.6305220883534136
prpgress of timestamp  : 0.6321285140562248
prpgress of timestamp  : 0.6337349397590362
prpgress of timestamp  : 0.6353413654618474
prpgress of timestamp  : 0.6369477911646586
prpgress of timestamp  : 0.6385542168674698
prpgress of timestamp  : 0.640160642570281
prpgress of timestamp  : 0.6417670682730924
prpgress of timestamp  : 0.6433734939759036
prpgress of timestamp  : 0.6449799196787148
prpgress of timestamp  : 0.646586345381526
prpgress of timestamp  : 0.6481927710843374
prpgress of timestamp  : 0.6497991967871486
prpgress of timestamp  : 0.6514056224899598
prpgress of timestamp  : 0.653012048192771
prpgress of timestamp  : 0.6546184738955823
prpgress of timestamp  : 0.6562248995983936
prpgress of timestamp  : 0.6578313253012048
prpgress of timestamp  : 0.659437751004016
prpgress of timestamp  : 0.6610441767068272
prpgress of timestamp  : 0.6626506024096386
prpgress of timestamp  : 0.6642570281124498
prpgress of timestamp  : 0.665863453815261
prpgress of timestamp  : 0.6674698795180722
prpgress of timestamp  : 0.6690763052208835
prpgress of timestamp  : 0.6706827309236948
prpgress of timestamp  : 0.672289156626506
prpgress of timestamp  : 0.6738955823293172
prpgress of timestamp  : 0.6755020080321285
prpgress of timestamp  : 0.6771084337349398
prpgress of timestamp  : 0.678714859437751
prpgress of timestamp  : 0.6803212851405622
prpgress of timestamp  : 0.6819277108433734
prpgress of timestamp  : 0.6835341365461847
prpgress of timestamp  : 0.685140562248996
prpgress of timestamp  : 0.6867469879518072
prpgress of timestamp  : 0.6883534136546184
prpgress of timestamp  : 0.6899598393574297
prpgress of timestamp  : 0.691566265060241
prpgress of timestamp  : 0.6931726907630522
prpgress of timestamp  : 0.6947791164658634
prpgress of timestamp  : 0.6963855421686747
prpgress of timestamp  : 0.6979919678714859
prpgress of timestamp  : 0.6995983935742972
prpgress of timestamp  : 0.7012048192771084
prpgress of timestamp  : 0.7028112449799196
prpgress of timestamp  : 0.704417670682731
prpgress of timestamp  : 0.7060240963855422
prpgress of timestamp  : 0.7076305220883534
prpgress of timestamp  : 0.7092369477911646
prpgress of timestamp  : 0.7108433734939759
prpgress of timestamp  : 0.7124497991967871
prpgress of timestamp  : 0.7140562248995984
prpgress of timestamp  : 0.7156626506024096
prpgress of timestamp  : 0.7172690763052209
prpgress of timestamp  : 0.7188755020080321
prpgress of timestamp  : 0.7204819277108434
prpgress of timestamp  : 0.7220883534136546
prpgress of timestamp  : 0.7236947791164658
prpgress of timestamp  : 0.7253012048192771
prpgress of timestamp  : 0.7269076305220883
prpgress of timestamp  : 0.7285140562248996
prpgress of timestamp  : 0.7301204819277108
prpgress of timestamp  : 0.7317269076305221
prpgress of timestamp  : 0.7333333333333333
prpgress of timestamp  : 0.7349397590361446
prpgress of timestamp  : 0.7365461847389558
prpgress of timestamp  : 0.738152610441767
prpgress of timestamp  : 0.7397590361445783
prpgress of timestamp  : 0.7413654618473895
prpgress of timestamp  : 0.7429718875502008
prpgress of timestamp  : 0.744578313253012
prpgress of timestamp  : 0.7461847389558233
prpgress of timestamp  : 0.7477911646586345
prpgress of timestamp  : 0.7493975903614458
prpgress of timestamp  : 0.751004016064257
prpgress of timestamp  : 0.7526104417670683
prpgress of timestamp  : 0.7542168674698795
prpgress of timestamp  : 0.7558232931726907
prpgress of timestamp  : 0.757429718875502
prpgress of timestamp  : 0.7590361445783133
prpgress of timestamp  : 0.7606425702811245
prpgress of timestamp  : 0.7622489959839357
prpgress of timestamp  : 0.763855421686747
prpgress of timestamp  : 0.7654618473895582
prpgress of timestamp  : 0.7670682730923695
prpgress of timestamp  : 0.7686746987951807
prpgress of timestamp  : 0.7702811244979919
prpgress of timestamp  : 0.7718875502008032
prpgress of timestamp  : 0.7734939759036145
prpgress of timestamp  : 0.7751004016064257
prpgress of timestamp  : 0.7767068273092369
prpgress of timestamp  : 0.7783132530120482
prpgress of timestamp  : 0.7799196787148595
prpgress of timestamp  : 0.7815261044176707
prpgress of timestamp  : 0.7831325301204819
prpgress of timestamp  : 0.7847389558232931
prpgress of timestamp  : 0.7863453815261044
prpgress of timestamp  : 0.7879518072289157
prpgress of timestamp  : 0.7895582329317269
prpgress of timestamp  : 0.7911646586345381
prpgress of timestamp  : 0.7927710843373494
prpgress of timestamp  : 0.7943775100401607
prpgress of timestamp  : 0.7959839357429719
prpgress of timestamp  : 0.7975903614457831
prpgress of timestamp  : 0.7991967871485943
prpgress of timestamp  : 0.8008032128514057
prpgress of timestamp  : 0.8024096385542169
prpgress of timestamp  : 0.8040160642570281
prpgress of timestamp  : 0.8056224899598393
prpgress of timestamp  : 0.8072289156626506
prpgress of timestamp  : 0.8088353413654619
prpgress of timestamp  : 0.8104417670682731
prpgress of timestamp  : 0.8120481927710843
prpgress of timestamp  : 0.8136546184738955
prpgress of timestamp  : 0.8152610441767069
prpgress of timestamp  : 0.8168674698795181
prpgress of timestamp  : 0.8184738955823293
prpgress of timestamp  : 0.8200803212851405
prpgress of timestamp  : 0.8216867469879519
prpgress of timestamp  : 0.8232931726907631
prpgress of timestamp  : 0.8248995983935743
prpgress of timestamp  : 0.8265060240963855
prpgress of timestamp  : 0.8281124497991967
prpgress of timestamp  : 0.8297188755020081
prpgress of timestamp  : 0.8313253012048193
prpgress of timestamp  : 0.8329317269076305
prpgress of timestamp  : 0.8345381526104417
prpgress of timestamp  : 0.8361445783132531
prpgress of timestamp  : 0.8377510040160643
prpgress of timestamp  : 0.8393574297188755
prpgress of timestamp  : 0.8409638554216867
prpgress of timestamp  : 0.8425702811244979
prpgress of timestamp  : 0.8441767068273093
prpgress of timestamp  : 0.8457831325301205
prpgress of timestamp  : 0.8473895582329317
prpgress of timestamp  : 0.8489959839357429
prpgress of timestamp  : 0.8506024096385543
prpgress of timestamp  : 0.8522088353413655
prpgress of timestamp  : 0.8538152610441767
prpgress of timestamp  : 0.8554216867469879
prpgress of timestamp  : 0.8570281124497992
prpgress of timestamp  : 0.8586345381526104
prpgress of timestamp  : 0.8602409638554216
prpgress of timestamp  : 0.8618473895582329
prpgress of timestamp  : 0.8634538152610441
prpgress of timestamp  : 0.8650602409638555
prpgress of timestamp  : 0.8666666666666667
prpgress of timestamp  : 0.8682730923694779
prpgress of timestamp  : 0.8698795180722891
prpgress of timestamp  : 0.8714859437751004
prpgress of timestamp  : 0.8730923694779116
prpgress of timestamp  : 0.8746987951807228
prpgress of timestamp  : 0.8763052208835341
prpgress of timestamp  : 0.8779116465863454
prpgress of timestamp  : 0.8795180722891567
prpgress of timestamp  : 0.8811244979919679
prpgress of timestamp  : 0.8827309236947791
prpgress of timestamp  : 0.8843373493975903
prpgress of timestamp  : 0.8859437751004016
prpgress of timestamp  : 0.8875502008032128
prpgress of timestamp  : 0.889156626506024
prpgress of timestamp  : 0.8907630522088353
prpgress of timestamp  : 0.8923694779116466
prpgress of timestamp  : 0.8939759036144579
prpgress of timestamp  : 0.8955823293172691
prpgress of timestamp  : 0.8971887550200803
prpgress of timestamp  : 0.8987951807228916
prpgress of timestamp  : 0.9004016064257028
prpgress of timestamp  : 0.902008032128514
prpgress of timestamp  : 0.9036144578313253
prpgress of timestamp  : 0.9052208835341365
prpgress of timestamp  : 0.9068273092369478

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Š PERFORMANCE COMPARISON RESULTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â±ï¸  TIMING:
  Metal:
    â€¢ Generator Creation: 0.086s
    â€¢ Mosaic Generation:  6.326s
    â€¢ Total Time:         6.412s

  Core Graphics:
    â€¢ Generator Creation: 0.000s
    â€¢ Mosaic Generation:  25.035s
    â€¢ Total Time:         25.035s

  âš¡ï¸ Speed Winner: Metal is 74.7% faster

ğŸ“¦ OUTPUT:
  Metal:
    â€¢ File Size:     1.36 MB
    â€¢ Dimensions:    10000 Ã— 5363
    â€¢ File:          test_video_10000_XS_16-9.heic
    â€¢ Location:      /var/folders/6d/dv5dx7bn6gg9f48k5f0y2t2h0000gn/T/MosaicKitTests/Metal/10000_XS_16-9

  Core Graphics:
    â€¢ File Size:     1.97 MB
    â€¢ Dimensions:    10000 Ã— 5363
    â€¢ File:          test_video_10000_XS_16-9.heic
    â€¢ Location:      /var/folders/6d/dv5dx7bn6gg9f48k5f0y2t2h0000gn/T/MosaicKitTests/CoreGraphics/10000_XS_16-9

  ğŸ’¾ Size: Metal output is 30.9% smaller

âš™ï¸  EFFICIENCY:
  Metal:         8 million pixels/sec
  Core Graphics: 2 million pixels/sec

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


âœ… Mosaics saved to:
  open /var/folders/6d/dv5dx7bn6gg9f48k5f0y2t2h0000gn/T/MosaicKitTests/Metal
  open /var/folders/6d/dv5dx7bn6gg9f48k5f0y2t2h0000gn/T/MosaicKitTests/CoreGraphics
ô€Ÿˆ  Test run started.
ô€„µ  Testing Library Version: 1085
ô€„µ  Target Platform: arm64e-apple-macos14.0
ô›  Test run with 0 tests in 0 suites passed after 0.001 seconds.
